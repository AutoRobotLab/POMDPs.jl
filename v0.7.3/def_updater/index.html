<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Defining a Belief Updater · POMDPs.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="POMDPs.jl logo"/></a><h1>POMDPs.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="../">POMDPs.jl</a></li><li><a class="toctext" href="../install/">Installation</a></li><li><a class="toctext" href="../get_started/">Getting Started</a></li><li><a class="toctext" href="../concepts/">Concepts and Architecture</a></li></ul></li><li><span class="toctext">Defining (PO)MDP Models</span><ul><li><a class="toctext" href="../def_pomdp/">Defining POMDPs and MDPs</a></li><li><a class="toctext" href="../explicit/">Explicit (PO)MDP Interface</a></li><li><a class="toctext" href="../generative/">Generative (PO)MDP Interface</a></li><li><a class="toctext" href="../requirements/">Interface Requirements for Problems</a></li><li><a class="toctext" href="../interfaces/">Spaces and Distributions</a></li></ul></li><li><span class="toctext">Writing Solvers and Updaters</span><ul><li><a class="toctext" href="../def_solver/">Defining a Solver</a></li><li><a class="toctext" href="../specifying_requirements/">Specifying Requirements</a></li><li class="current"><a class="toctext" href>Defining a Belief Updater</a><ul class="internal"><li><a class="toctext" href="#Defining-a-Belief-Type-1">Defining a Belief Type</a></li><li><a class="toctext" href="#Defining-an-Updater-1">Defining an Updater</a></li></ul></li></ul></li><li><span class="toctext">Analyzing Results</span><ul><li><a class="toctext" href="../simulation/">Simulation Standard</a></li><li><a class="toctext" href="../run_simulation/">Running Simulations</a></li><li><a class="toctext" href="../policy_interaction/">Interacting with Policies</a></li></ul></li><li><a class="toctext" href="../faq/">Frequently Asked Questions (FAQ)</a></li><li><a class="toctext" href="../api/">API Documentation</a></li></ul></nav><article id="docs"><header><nav><ul><li>Writing Solvers and Updaters</li><li><a href>Defining a Belief Updater</a></li></ul><a class="edit-page" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/master/docs/src/def_updater.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Defining a Belief Updater</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Defining-a-Belief-Updater-1" href="#Defining-a-Belief-Updater-1">Defining a Belief Updater</a></h1><p>In this section we list the requirements for defining a belief updater. For a description of what a belief updater is, see <a href="../concepts/#Beliefs-and-Updaters-1">Concepts and Architecture - Beliefs and Updaters</a>. Typically a belief updater will have an associated belief type, and may be closely tied to a particular policy/planner.</p><h2><a class="nav-anchor" id="Defining-a-Belief-Type-1" href="#Defining-a-Belief-Type-1">Defining a Belief Type</a></h2><p>A belief object should contain all of the information needed for the next belief update and for the policy to make a decision. The belief type could be a pre-defined type such as a distribution from <code>Distributions.jl</code> or <code>DiscreteBelief</code> or <code>SparseCat</code> from <code>POMDPModelTools.jl</code>, or it could be a custom type.</p><p>Often, but not always, the belief will represent a probability distribution. In this case, the functions in the <a href="../interfaces/#Distributions-1">distribution interface</a> should be implemented if possible. Implementing these functions will make the belief usable with many of the policies and planners in the POMDPs.jl ecosystem, and will make it easy for others to convert between beliefs and to interpret what a belief means.</p><h2><a class="nav-anchor" id="Defining-an-Updater-1" href="#Defining-an-Updater-1">Defining an Updater</a></h2><p>To create an updater, one should define a subtype of the <code>Updater</code> abstract type and implement two methods, one to create the initial belief from the problem&#39;s initial state distribution and one to perform a belief update:</p><ul><li><a href="../api/#POMDPs.initialize_belief"><code>initialize_belief(updater, d)</code></a> creates a belief from state distribution <code>d</code> appropriate to use with the updater. To extract information from <code>d</code>, use the functions from the <a href="../interfaces/#Distributions-1">distribution interface</a>.</li><li><a href="../api/#POMDPs.update"><code>update(updater, b, a, o)</code></a> returns an updated belief given belief <code>b</code>, action <code>a</code>, and observation <code>o</code>. One can usually expect <code>b</code> to be the same type returned by <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a> because a careful user will always call <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a> before <a href="../api/#POMDPs.update"><code>update</code></a>, but it would also be reasonable to implement <a href="../api/#POMDPs.update"><code>update</code></a> for <code>b</code> of a different type if it is desirable to handle multiple belief types.</li></ul><h3><a class="nav-anchor" id="Example:-History-Updater-1" href="#Example:-History-Updater-1">Example: History Updater</a></h3><p>One trivial type of belief would be the action-observation history, a list containing the initial state distribution and every action taken and observation received. The history contains all of the information received up to the current time, but it is not usually very useful because most policies make decisions based on a state probability distribution. Here the belief type is simply the built in <code>Vector{Any}</code>, so we need only create the updater and write <a href="../api/#POMDPs.update"><code>update</code></a> and <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a>. Normally, <a href="../api/#POMDPs.update"><code>update</code></a> would contain belief update probability calculations, but in this example, we simply append the action and observation to the history.</p><p>(Note that this example is designed for readability rather than efficiency.)</p><pre><code class="language-julia">import POMDPs

struct HistoryUpdater &lt;: POMDPs.Updater end

initialize_belief(up::HistoryUpdater, d) = Any[d]

function POMDPs.update(up::HistoryUpdater, b, a, o)
    bp = copy(b)
    push!(bp, a)
    push!(bp, o)
    return bp
end</code></pre><p>At each step, the history starts with the original distribution, then contains all the actions and observations received up to that point. The example below shows this for the crying baby problem (observations are true/false for crying and actions are true/false for feeding).</p><pre><code class="language-julia">using POMDPPolicies
using POMDPSimulators
using POMDPModels
using Random

pomdp = BabyPOMDP()
policy = RandomPolicy(pomdp, rng=MersenneTwister(1))
up = HistoryUpdater()

# within stepthrough initialize_belief is called on the initial state distribution of the pomdp, then update is called at each step.
for b in stepthrough(pomdp, policy, up, &quot;b&quot;, rng=MersenneTwister(2), max_steps=5)
    @show b
end

# output

b = Any[POMDPModels.BoolDistribution(0.0)]
b = Any[POMDPModels.BoolDistribution(0.0), false, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false, true, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false, true, false, true, false]</code></pre><footer><hr/><a class="previous" href="../specifying_requirements/"><span class="direction">Previous</span><span class="title">Specifying Requirements</span></a><a class="next" href="../simulation/"><span class="direction">Next</span><span class="title">Simulation Standard</span></a></footer></article></body></html>
